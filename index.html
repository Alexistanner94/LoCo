<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="assets/js/script.js"></script>
    <script type="text/javascript" src="assets/js/weather.js"></script>

    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <!-- <link rel="stylesheet" href="assets/css/bulma.min.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/typography.css">
    <!-- <link rel="stylesheet" href="assets/css/style.css"> -->
    <link rel="stylesheet" href="assets/css/style_new.css">


    <title>LoCo</title>
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="columns">
                <div class="column">
                    <h1>LoCo</h1>
                    <h2 class="small">A search for happenings</h2>
                </div>
            </div>
        </div>
    </header>

    <section class="section">
        <div class="container">
            <form id="searchToggle">
                <img src="assets/img/musicLogo.png" class="searchTopic btn" id="bandButton" value="band" />
                <img src="assets/img/city.png" class="searchTopic btn" id="cityButton" value="city" />
            </form>

            <select class="select monthSelect" id="monthSelect">
                <option value="0">Choose Month:</option>
                <option value="January">January</option>
                <option value="February">February</option>
                <option value="March">March</option>
                <option value="April">April</option>
                <option value="May">May</option>
                <option value="June">June</option>
                <option value="July">July</option>
                <option value="August">August</option>
                <option value="September">September</option>
                <option value="October">October</option>
                <option value="November">November</option>
                <option value="December">December</option>
            </select>

            <div class="columns" id="searchInputs">
                <div class="column">
                    <div class="columns bandCol">
                        <div class="column" id="bandSearch">
                            <input type="text" class="search" id="bandVal" placeholder="Band"></input>
                        </div>
                    </div>
                    <div class="columms">
                        <div class="columns">
                            <div class="column citySearch" id="citySearch">
                                <input type=" text" class="search" id="cityVal" placeholder="City"></input>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="column is-narrow has-text-centered">

                    <button id="searchbtn" class="btn">Search</button>

                </div>
            </div>
        </div>
    </section>



    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column" id="results">

                </div>
                <div class="column" id="weatherResults">

                </div>
            </div>
        </div>
    </section>

    <!-- Already included in head <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <script type="text/javascript">
        $(document).ready(function () {
            searchType = "band";
            $("#cityButton").on("click", function () {
                searchType = "place";
                $(".citySearch").css("display", "flex");
                $(".monthSelect").css("display", "inline-block");
                $("#bandSearch").css("display", "none");
            });

            $("#bandButton").on("click", function () {
                searchType = "band";
                $(".citySearch,.monthSelect").css("display", "none");
                $("#bandSearch").css("display", "flex");
            });

            //object for ajax
            $('#searchbtn').on("click", function (e) {
                e.preventDefault();
                let searchParams = {};
                if (searchType == "band") {
                    //search by band
                    let searchQ = $('#bandVal').val().replace(/\s+/g, '-');
                    console.log("sQ: " + searchQ);
                    searchParams["performers.slug"] = searchQ;
                } else {
                    //search by city and month
                    searchParams["venue.city"] = $('#cityVal').val();
                    searchParams["q"] = $('#monthSelect').val(); // conditional for if selected needed
                }

                getEvents(searchParams);
            });





        });
    </script>

</body>

</html>